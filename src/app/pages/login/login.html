<section class="login-page">
  <div class="login-card">

    <!-- =====================
         SELECT
    ===================== -->
    <ng-container *ngIf="mode === 'select'">
      <div class="welcome-premium premium-onboarding">

        <span class="welcome-badge">ğŸš€ Footbally BaÅŸlangÄ±Ã§</span>

        <h2>HoÅŸ Geldin</h2>
        <p class="subtitle">NasÄ±l devam etmek istiyorsun?</p>

        <div class="role-cards premium-tiles">

          <button class="role-card premium-tile" (click)="selectRole('player')">
            <div class="role-icon">âš½</div>
            <div class="role-text">
              <strong>Oyuncuyum</strong>
              <span>Kendini gÃ¶ster, keÅŸfedil</span>
            </div>
          </button>

          <button class="role-card premium-tile" (click)="selectRole('team')">
            <div class="role-icon">ğŸŸï¸</div>
            <div class="role-text">
              <strong>TakÄ±mÄ±m Var</strong>
              <span>Oyuncu bul, analiz et</span>
            </div>
          </button>

        </div>

        <p class="switch-auth premium-switch">
          Zaten Ã¼yeliÄŸin var mÄ±?
          <span class="cta-link" (click)="goToLogin()">GiriÅŸ Yap</span>
        </p>

      </div>
    </ng-container>


    <!-- =====================
         REGISTER
    ===================== -->
    <ng-container *ngIf="mode === 'register'">

      <h2>Ãœye Ol</h2>

      <input placeholder="Ad" [(ngModel)]="register.firstName">
      <input placeholder="Soyad" [(ngModel)]="register.lastName">
      <input placeholder="E-posta" [(ngModel)]="register.email">
      <input placeholder="Telefon NumarasÄ±" [(ngModel)]="register.phone">

      <div class="password-field">
        <input
          [type]="showPassword ? 'text' : 'password'"
          placeholder="Åifre"
          [(ngModel)]="register.password">
        <button class="eye-btn" type="button"
                (click)="showPassword = !showPassword">ğŸ‘</button>
      </div>

      <div class="password-field">
        <input
          [type]="showPasswordRepeat ? 'text' : 'password'"
          placeholder="Åifre Tekrar"
          [(ngModel)]="register.passwordRepeat">
        <button class="eye-btn" type="button"
                (click)="showPasswordRepeat = !showPasswordRepeat">ğŸ‘</button>
      </div>

      <!-- GÄ°ZLÄ°LÄ°K -->
      <div class="check-row required">
        <span class="check-text">
          Gizlilik PolitikasÄ±â€™nÄ± okudum ve kabul ediyorum.
        </span>

        <button
          type="button"
          class="toggle-btn"
          [class.active]="register.privacy"
          (click)="openLegal('privacy')">
        </button>
      </div>

      <!-- KVKK -->
      <div class="check-row required">
        <span class="check-text">
          KVKK metnini okudum ve kabul ediyorum.
        </span>

        <button
          type="button"
          class="toggle-btn"
          [class.active]="register.kvkk"
          (click)="openLegal('terms')">
        </button>
      </div>

      <!-- SMS -->
      <div class="check-row optional">
        <span class="check-text">SMS almak istiyorum</span>

        <label class="check-label">
          <input type="checkbox" [(ngModel)]="register.sms">
          <span class="toggle"></span>
        </label>
      </div>

      <!-- MAIL -->
      <div class="check-row optional">
        <span class="check-text">E-posta almak istiyorum</span>

        <label class="check-label">
          <input type="checkbox" [(ngModel)]="register.mail">
          <span class="toggle"></span>
        </label>
      </div>

      <button class="primary-btn"
              [disabled]="!canRegister()"
              (click)="submitRegister()">
        Ãœye Ol
      </button>

      <p class="switch-auth">
        Zaten Ã¼yeliÄŸin var mÄ±?
        <span class="cta-link" (click)="goToLogin()">GiriÅŸ Yap</span>
      </p>

    </ng-container>


    <!-- =====================
         LOGIN
    ===================== -->
    <ng-container *ngIf="mode === 'login'">

      <h2>GiriÅŸ Yap</h2>

      <input placeholder="E-posta" [(ngModel)]="loginEmail">
      <input placeholder="Åifre" type="password" [(ngModel)]="loginPassword">

      <button
        class="primary-btn"
        [disabled]="!canLogin()"
        (click)="submitLogin()">
        GiriÅŸ Yap
      </button>

      <p class="switch-auth">
        HesabÄ±n yok mu?
        <span class="cta-link" (click)="goToRegister()">Ãœye Ol</span>
      </p>

      <p class="forgot-line">
        GiriÅŸ yapamÄ±yor musun?
        <span class="cta-link" (click)="goToForgot()">Åifremi Unuttum</span>
      </p>

    </ng-container>


    <!-- =====================
         FORGOT
    ===================== -->
    <ng-container *ngIf="mode === 'forgot'">

      <h2>Åifremi Unuttum</h2>

      <input placeholder="E-posta" [(ngModel)]="forgotEmail">

      <button class="primary-btn" (click)="submitForgotPassword()">
        Link GÃ¶nder
      </button>

      <p class="switch-auth">
        <button class="back-btn" (click)="goToLogin()">Geri DÃ¶n</button>
      </p>

    </ng-container>


    <!-- =====================
         FORGOT SUCCESS
    ===================== -->
    <ng-container *ngIf="mode === 'forgot-success'">

      <h2>Mail GÃ¶nderildi âœ…</h2>

      <p>Åifre sÄ±fÄ±rlama baÄŸlantÄ±sÄ± e-posta adresine gÃ¶nderildi.</p>

      <button class="primary-btn" (click)="goToLogin()">
        GiriÅŸ Yap
      </button>

    </ng-container>

  </div>

  <!-- LEGAL MODAL -->
  <app-legal-modal
    *ngIf="showLegal"
    [type]="legalType"
    [title]="legalType === 'privacy'
      ? 'Gizlilik PolitikasÄ±'
      : 'KVKK AydÄ±nlatma Metni'"
    (close)="closeLegal($event)">
  </app-legal-modal>

</section>
