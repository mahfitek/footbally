<!-- ========================= -->
<!-- PROFÄ°L -->
<!-- ========================= -->
<ng-container *ngIf="profileCompleted">

  <div class="profile-grid">

    <!-- ================= HERO CARD ================= -->
    <div
      class="hero-card-wrapper"
      [ngClass]="isPremium ? 'gold' : 'silver'">

      <app-player-hero-card
        [fullName]="profile.fullName"
        [position]="profile.positions[0]"
        [rating]="82"
        [cardTier]="isPremium ? 'gold' : 'silver'"
        referencePlayer="MbappÃ©"
        [isPremium]="isPremium">
      </app-player-hero-card>

      <!-- PREMIUM LOCK -->
      <div
        *ngIf="!isPremium"
        class="hero-premium-overlay">
        <div class="hero-premium-badge">
          ðŸ”’ Rating Premiumâ€™da
        </div>
      </div>

    </div>

    <!-- ================= PLAYER INFO ================= -->
    <div class="profile-card">
      <h2>Oyuncu Bilgileri</h2>

      <ng-container *ngIf="!isEditingProfile">
        <p><b>Ad:</b> {{ profile.fullName }}</p>
        <p><b>YaÅŸ:</b> {{ profile.age }}</p>
        <p><b>Fizik:</b> {{ profile.heightCm }} / {{ profile.weightKg }}</p>
        <p><b>Mevki:</b> {{ profile.positions.join(', ') }}</p>
        <p><b>Ayak:</b> {{ profile.preferredFoot }}</p>
        <p><b>Lokasyon:</b> {{ profile.city }} / {{ profile.district }}</p>
        <p><b>TakÄ±mlar:</b> {{ profile.teamsPlayed || '-' }}</p>

        <button
          class="mini-btn"
          (click)="startEditProfile()">
          Profili DÃ¼zenle
        </button>
      </ng-container>

      <ng-container *ngIf="isEditingProfile">

        <input placeholder="Ad Soyad" [(ngModel)]="profile.fullName" />
        <input type="number" placeholder="YaÅŸ" [(ngModel)]="profile.age" />

        <div class="row">
          <input type="number" placeholder="Boy (cm)" [(ngModel)]="profile.heightCm" />
          <input type="number" placeholder="Kilo (kg)" [(ngModel)]="profile.weightKg" />
        </div>

        <div class="select-wrapper">
          <select [(ngModel)]="profile.city" (change)="onCityChange()">
            <option value="">Åžehir SeÃ§</option>
            <option *ngFor="let city of cities" [value]="city">{{ city }}</option>
          </select>
        </div>

        <div class="select-wrapper">
          <select [(ngModel)]="profile.district">
            <option value="">Ä°lÃ§e SeÃ§</option>
            <option *ngFor="let d of districts" [value]="d">{{ d }}</option>
          </select>
        </div>

        <div class="select-wrapper">
          <select [(ngModel)]="profile.preferredFoot">
            <option value="">GÃ¼Ã§lÃ¼ Ayak</option>
            <option *ngFor="let foot of footOptions" [value]="foot">{{ foot }}</option>
          </select>
        </div>

        <div class="positions">
          <button *ngFor="let pos of positions"
            (click)="togglePosition(pos)"
            [class.active]="profile.positions.includes(pos)">
            {{ pos }}
          </button>
        </div>

        <textarea placeholder="TakÄ±mlar / akademiler" [(ngModel)]="profile.teamsPlayed"></textarea>

        <div style="display:flex; gap:8px;">
          <button class="mini-btn yellow" (click)="saveEditProfile()">Kaydet</button>
          <button class="mini-btn dark" (click)="cancelEditProfile()">VazgeÃ§</button>
        </div>

      </ng-container>
    </div>

    <!-- ================= CV ================= -->
    <div class="profile-card">
      <h2>Ã–zgeÃ§miÅŸ</h2>

      <p *ngIf="hasCv && !isEditingCv">{{ cvText }}</p>
      <p *ngIf="!hasCv && !isEditingCv">HenÃ¼z Ã¶zgeÃ§miÅŸ eklenmedi.</p>

      <button
        *ngIf="!isEditingCv"
        class="mini-btn"
        (click)="startEditCv()">
        {{ hasCv ? 'DÃ¼zenle' : 'Ã–zgeÃ§miÅŸ Ekle' }}
      </button>

      <ng-container *ngIf="isEditingCv">
        <textarea [(ngModel)]="cvText"></textarea>
        <div style="display:flex; gap:8px;">
          <button class="mini-btn yellow" (click)="saveCv()">Kaydet</button>
          <button class="mini-btn dark" (click)="cancelCv()">VazgeÃ§</button>
        </div>
      </ng-container>
    </div>

    <!-- ================= PHOTOS ================= -->
    <div class="profile-card">
      <h2>FotoÄŸraflar</h2>
      <p *ngIf="!hasPhoto">HenÃ¼z fotoÄŸraf eklenmedi.</p>
      <p *ngIf="hasPhoto">FotoÄŸraf yÃ¼klendi âœ…</p>

      <button class="mini-btn" (click)="addPhoto()">FotoÄŸraf Ekle</button>
    </div>

    <!-- ================= VIDEOS ================= -->
    <div class="profile-card">
      <h2>Videolar</h2>
      <p *ngIf="!hasVideo">HenÃ¼z video eklenmedi.</p>
      <p *ngIf="hasVideo">Video yÃ¼klendi âœ…</p>

      <button class="mini-btn" (click)="addVideo()">Video Ekle</button>
    </div>

  </div>

  <!-- ===== AI ANALYSIS ===== -->

  <div class="ai-lock-wrapper">

    <div class="ai-blur-content" [class.locked]="!isPremium">

      <app-player-rating [isPremium]="isPremium"></app-player-rating>

      <app-player-meta
        [meta]="{
          age: profile.age ?? undefined,
          city: profile.city,
          country: 'TÃ¼rkiye'
        }">
      </app-player-meta>

      <app-player-media [isPremium]="isPremium"></app-player-media>

      <app-premium-ai-preview *ngIf="isPremium"></app-premium-ai-preview>

    </div>

    <div class="ai-lock-overlay" *ngIf="!isPremium">
      <div class="lock-box">
        ðŸ”’ <strong>AI Analizi Premiumâ€™da AÃ§Ä±lÄ±r</strong>
        <p>DetaylÄ± performans puanlarÄ± ve video analizi iÃ§in Premiumâ€™a geÃ§.</p>
      </div>
    </div>

  </div>

</ng-container>
